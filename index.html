<!doctype html>
<html>
  <head>
    <title>Quizzer Interface</title>
    <link rel="stylesheet" type="text/css" href="css">
  </head>
  <body>
    <form id='answer' action="">
      <input id="a" autocomplete="off" value="YourName" />
      <button id='answer_button'>SET NAME</button>
    </form>
    <form id='chatter' action="">
      <input id="m" autocomplete="off" />
      <button class='chat'>CHAT</button>
    </form>

    <h2>Questions</h2>
    <ul id="questions"></ul>

    <h2>Chat Messages</h2>
    <ul id="messages"></ul>

    <script src="socket"></script>
    <script src="jquery"></script>
    <script>
      var brb_pressed = false; // used to limit number times the brb can be pressed

      $(function () {
        var socket = io();
        $('#chatter').submit(function(){
          console.log("Chatter");
          socket.emit('chat message', $('#m').val());
          $('#m').val('');
          return false;
        });

        $('#answer').submit(function(evt){
          console.log("Answer");
          if (brb_pressed == false) {
            brb_pressed = true;
            socket.emit('answer message', evt.currentTarget[0].value);
            $('#answer_button').addClass('pressed');
            $('#answer_button').text('PRESSED');
          }
          return false;
        });

        socket.on('chat message', function(msg){
          $('#messages').append($('<li>').text(msg));
          window.scrollTo(0, document.body.scrollHeight);
        });

        socket.on('quiz message', function(msg){
          brb_pressed = false;
          $('#answer_button').removeClass('pressed')
          $('#answer_button').text('ANSWER');
          $('#messages').html('');
          $('#questions').html('');
          $('#questions').append($('<li class="question">').text('QUESTION:'+msg));
          //window.scrollTo(0, document.body.scrollHeight);
        });
      });
    </script>
  </body>
</html>
